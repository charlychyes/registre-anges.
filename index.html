<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ONE UNIT</title>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    <style>
        :root { --primary: #1e272e; --accent: #d4af37; --success: #27ae60; --danger: #c0392b; --border: #dcdde1; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; padding: 10px; }
        .container { max-width: 800px; margin: auto; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .header { background: var(--primary); color: white; padding: 20px; display: flex; align-items: center; border-bottom: 4px solid var(--accent); }
        .logo { height: 50px; width: 50px; border-radius: 50%; border: 2px solid var(--accent); margin-right: 15px; background: white; }
        .stats { display: flex; background: #fff; border-bottom: 1px solid var(--border); text-align: center; }
        .stat-item { flex: 1; padding: 15px; border-right: 1px solid var(--border); }
        .stat-item b { display: block; font-size: 1.2rem; color: var(--primary); }
        table { width: 100%; border-collapse: collapse; }
        th { background: #f8f9fa; padding: 12px; font-size: 0.8rem; color: #7f8c8d; text-transform: uppercase; }
        td { padding: 12px; border-bottom: 1px solid var(--border); text-align: center; }
        .btn-status { padding: 8px 12px; border-radius: 6px; border: none; font-weight: bold; cursor: pointer; color: white; }
        .paid { background: var(--success); } .unpaid { background: var(--danger); }
        .admin-area { display: none; padding: 20px; background: #f9f9f9; border-top: 2px solid var(--accent); }
        input, select, button.add { padding: 10px; margin: 5px; border-radius: 5px; border: 1px solid #ccc; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <img src="logo.png" class="logo" onerror="this.style.display='none'">
        <div style="flex-grow:1">
            <h1 style="margin:0; font-size:1.5rem; letter-spacing: 1px;">ONE UNIT</h1>
            <small style="color:var(--accent); font-weight: bold;">SYSTÃˆME DE GESTION LIVE</small>
        </div>
        <span onclick="askAccess()" id="lock-btn" style="cursor:pointer; font-size:0.8rem; border: 1px solid var(--accent); padding: 5px; border-radius: 4px;">ADMIN ðŸ”’</span>
    </div>

    <div class="stats" id="summary">
        <div class="stat-item">TOTAL COLLECTÃ‰ (USD)<br><b id="totalUSD">0</b></div>
        <div class="stat-item">TOTAL COLLECTÃ‰ (CDF)<br><b id="totalCDF">0</b></div>
    </div>

    <table>
        <thead><tr><th>MEMBRE</th><th>MONTANT</th><th>STATUT</th></tr></thead>
        <tbody id="list"></tbody>
    </table>

    <div id="admin" class="admin-area">
        <h3 style="margin-top:0;">PANNEAU ADMINISTRATEUR</h3>
        <input type="text" id="name" placeholder="Nom du membre">
        <input type="number" id="amt" placeholder="Montant">
        <select id="cur"><option value="USD">USD</option><option value="CDF">CDF</option></select>
        <button onclick="add()" class="add" style="background:var(--primary); color:white; cursor:pointer;">AJOUTER AU REGISTRE</button>
    </div>
</div>

<script>
    // Configuration extraite de tes captures d'Ã©cran
    const firebaseConfig = {
        apiKey: "AIzaSyB78cC9gnYCgPjd9ikZjboHqWq86-j-7YI",
        authDomain: "oneunit-dfa62.firebaseapp.com",
        databaseURL: "https://oneunit-dfa62-default-rtdb.firebaseio.com",
        projectId: "oneunit-dfa62",
        storageBucket: "oneunit-dfa62.firebasestorage.app",
        messagingSenderId: "837193571803",
        appId: "1:837193571803:web:b921421a5765c363943340"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const membersRef = db.ref('members');
    let isAdmin = false;

    // Utilisation de ton code secret personnel
    function askAccess() {
        if(prompt("Code d'accÃ¨s ONE UNIT :") === "05102005") {
            isAdmin = true;
            document.getElementById('admin').style.display = 'block';
            document.getElementById('lock-btn').innerText = "MODE ADMIN âœ…";
            document.getElementById('lock-btn').style.background = "#27ae60";
        }
    }

    function add() {
        const n = document.getElementById('name').value;
        const a = parseFloat(document.getElementById('amt').value);
        if(n && a) {
            membersRef.push({ name: n, amount: a, currency: document.getElementById('cur').value, paid: false });
            document.getElementById('name').value = ""; document.getElementById('amt').value = "";
        }
    }

    function toggle(key, status) {
        if(isAdmin) {
            membersRef.child(key).update({ paid: !status });
        } else {
            alert("AccÃ¨s refusÃ©. Veuillez vous connecter en tant qu'administrateur.");
        }
    }

    membersRef.on('value', (snap) => {
        const data = snap.val() || {};
        const list = document.getElementById('list');
        list.innerHTML = "";
        let tUSD = 0, tCDF = 0;

        Object.keys(data).forEach(key => {
            const m = data[key];
            if(m.paid) { if(m.currency === 'USD') tUSD += m.amount; else tCDF += m.amount; }
            list.innerHTML += `<tr>
                <td style="text-align:left"><b>${m.name.toUpperCase()}</b></td>
                <td>${m.amount} ${m.currency}</td>
                <td><button onclick="toggle('${key}', ${m.paid})" class="btn-status ${m.paid ? 'paid':'unpaid'}">${m.paid ? 'PAYÃ‰':'Ã€ PAYER'}</button></td>
            </tr>`;
        });
        document.getElementById('totalUSD').innerText = tUSD + " $";
        document.getElementById('totalCDF').innerText = tCDF + " FC";
    });
</script>
</body>
</html>
